import 'package:flutter/services.dart';

class HealthRepository {
  static const _channel = MethodChannel('org.pruziKorak.healthkit/callback');

  Future<double> getStepsToday() async {
    try {
      final steps = await _channel.invokeMethod<double>('getStepsToday');
      return steps ?? 0;
    } catch (e) {
      throw Exception('Failed to fetch steps today: $e');
    }
  }

  Future<double> getStepsFromCampaignStart(DateTime campaignStart) async {
    try {
      final timestamp = campaignStart.millisecondsSinceEpoch / 1000;
      final steps = await _channel.invokeMethod<double>('getStepsFromCampaignStart', timestamp);
      return steps ?? 0;
    } catch (e) {
      throw Exception('Failed to fetch steps from campaign start: $e');
    }
  }
}